(this["webpackJsonpsd-0x-project-frontend-online-store"]=this["webpackJsonpsd-0x-project-frontend-online-store"]||[]).push([[0],{16:function(e,t,a){e.exports=a.p+"static/media/shopping-cart-solid.8bf1af37.svg"},18:function(e,t,a){},21:function(e,t,a){},26:function(e,t,a){e.exports=a.p+"static/media/bars-solid.b3f49afd.svg"},27:function(e,t,a){e.exports=a.p+"static/media/times-solid.2c5552a1.svg"},29:function(e,t,a){e.exports=a.p+"static/media/search-solid.c6a0effb.svg"},30:function(e,t,a){e.exports=a(47)},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),i=a.n(c),o=(a(35),a(1)),l=a(2),s=a(4),u=a(3),m=(a(36),a(6)),d=a(12),p=a(26),h=a.n(p),g=a(27),b=a.n(g),f=a(16),v=a.n(f),E=(a(37),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).menuToggle=function(){var t=e.state.toggle;e.setState({toggle:!t})},e.sumCartItems=function(){var t=Object(d.a)({},localStorage),a=Object.values(t).map((function(e){return JSON.parse(e)})).reduce((function(e,t){return e+t.counter}),0);e.setState({sum:a})},e.state={toggle:!1,sum:0},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.sumCartItems()}},{key:"render",value:function(){var e=this.state,t=e.toggle,a=e.sum;return r.a.createElement("header",null,r.a.createElement("div",{className:"menu",onClick:this.menuToggle,"aria-hidden":"true"},r.a.createElement("img",{src:h.a,alt:"",width:"20"})),r.a.createElement("div",{className:"logo"},r.a.createElement("h1",null,r.a.createElement(m.b,{to:"/"},"Mercado Livre"))),r.a.createElement("nav",null,r.a.createElement("ul",{className:t?"toggle":""},r.a.createElement("li",null,r.a.createElement(m.b,{to:"/home"},"Home")),r.a.createElement("li",null,r.a.createElement(m.b,{to:"/product"},"Produtos")),r.a.createElement("li",null,r.a.createElement(m.b,{to:"/contact"},"Contato")),r.a.createElement("li",null,r.a.createElement(m.b,{to:"/about"},"Sobre")),r.a.createElement("li",null,r.a.createElement(m.b,{to:"/login"},"Login / Registro")),r.a.createElement("li",{className:"close",onClick:this.menuToggle,"aria-hidden":"true"},r.a.createElement("img",{src:b.a,alt:"",width:"20"}))),r.a.createElement("div",{"data-testid":"shopping-cart-size",className:"nav-cart"},r.a.createElement("span",{"data-testid":"shopping-cart-size"},a),r.a.createElement(m.b,{to:"/cart"},r.a.createElement("img",{src:v.a,alt:"",width:"20"})))))}}]),a}(n.Component)),y=a(5),O=a(10),j=a.n(O),S=a(14),k=a(13);function N(){return C.apply(this,arguments)}function C(){return(C=Object(S.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.mercadolibre.com/sites/MLB/categories");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){return x.apply(this,arguments)}function x(){return(x=Object(S.a)(j.a.mark((function e(t,a){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.mercadolibre.com/sites/MLB/search?category=".concat(t,"&q=").concat(a));case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(18);var I=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"loading"},r.a.createElement("img",{src:"https://cdn.lowgif.com/small/0534e2a412eeb281-the-counterintuitive-tech-behind-netflix-s-worldwide.gif",alt:"loading"}))}}]),a}(n.Component),q=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={categories:[],status:"loading"},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.fetchApi()}},{key:"fetchApi",value:function(){var e=Object(S.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:t=e.sent,this.setState({categories:t,status:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.categories,a=e.status,n=this.props.fetchProducts;return"loading"===a?r.a.createElement(I,null):r.a.createElement("section",{className:"category-section"},r.a.createElement("h1",null,"Categorias:"),t.map((function(e){return r.a.createElement("option",{key:e.id,className:"label-radio","data-testid":"category",id:e.id,name:"category",value:e.id,onClick:function(e){var t=e.target.value;return n(t)}},e.name)})))}}]),a}(n.Component),F=(a(21),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).handleClick=function(){e.setState((function(e){return{counter:e.counter+1}}));var t=e.state.counter,a=e.props.products,n=a.title,r={counter:t,price:a.price,thumbnail:a.thumbnail,id:a.id,attributes:a.attributes,title:n},c=JSON.stringify(r);localStorage.setItem(n,c)},e.state={counter:1},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=this.state.counter,a=this.props.products,n=a.title,c=a.price,i=a.thumbnail,o=a.id,l=a.attributes,s=a.shipping,u=e.available_quantity;return r.a.createElement("li",{className:"card"},r.a.createElement(m.b,{"data-testid":"product-detail-link",to:{pathname:"/product/".concat(o),state:{title:n,price:c,thumbnail:i,id:o,attributes:l,shipping:s,availableQuantity:u}}},r.a.createElement("div",{"data-testid":"product",className:"product"},r.a.createElement("img",{src:i,alt:"Foto do produto ".concat(n)}),r.a.createElement("h3",null,n),s.free_shipping?r.a.createElement("p",{className:"shipping","data-testid":"free-shipping"},"Frete Gr\xe1tis!"):null,r.a.createElement("p",null,"R$ ".concat(c.toLocaleString("pt-BR"))))),r.a.createElement("button",{disabled:t>u,className:"button","data-testid":"product-add-to-cart",onClick:this.handleClick,type:"button"},"Adicionar ao Carrinho"))}}]),a}(n.Component)),J=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.products;return r.a.createElement("ul",{className:"cart-items"},0===e.length?r.a.createElement("h4",null,"Nenhum produto foi encontrado"):e.map((function(e){return r.a.createElement(F,{key:e.id,products:e})})))}}]),a}(n.Component);J.defaultProps={products:[]};var L=J,R=a(29),H=a.n(R),M=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).fetchProducts=function(){var t=Object(S.a)(j.a.mark((function t(a){var n,r,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.state,r=n.query,c=n.categoryId,e.setState({request:!0,categoryId:a},Object(S.a)(j.a.mark((function t(){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(c,r);case 2:a=t.sent,e.setState({dataApi:a.results,request:!1,query:""});case 4:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.sumCartItems=function(){var t=Object(d.a)({},localStorage),a=Object.values(t).map((function(e){return JSON.parse(e)})).reduce((function(e,t){return e+t.counter}),0);e.setState({sum:a})},e.state={query:"",categoryId:"",dataApi:[],request:!1,sum:0},e.onSearchTextChange=e.onSearchTextChange.bind(Object(k.a)(e)),e.fetchProducts=e.fetchProducts.bind(Object(k.a)(e)),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.sumCartItems()}},{key:"onSearchTextChange",value:function(e){var t=e.target;this.setState({query:t.value})}},{key:"render",value:function(){var e=this,t=this.state,a=t.dataApi,n=t.request,c=t.query,i=t.sum;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cart-screen"},r.a.createElement("span",{"data-testid":"shopping-cart-size"},i),r.a.createElement(m.b,{to:"/cart"},r.a.createElement("button",{type:"button",className:"cart-scree","data-testid":"shopping-cart-button"},r.a.createElement("img",{src:v.a,alt:"",width:"20"})))),r.a.createElement("p",{className:"info","data-testid":"home-initial-message"},"Digite algum termo de pesquisa ou escolha uma categoria."),r.a.createElement(q,{fetchProducts:this.fetchProducts}),r.a.createElement("section",{className:"searchbar"},r.a.createElement("input",{className:"search-txt",placeholder:"Search","data-testid":"query-input",type:"text",onChange:this.onSearchTextChange}),r.a.createElement("button",{className:"searchbar-btn","data-testid":"query-button",type:"button",onClick:function(){return e.fetchProducts()},query:c},r.a.createElement("img",{src:H.a,alt:"",width:"20"}))),r.a.createElement(L,{products:a,request:n}))}}]),a}(n.Component),A=a(19),P=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(o.a)(this,a);var r=(n=t.call(this,e)).props,c=r.email,i=r.msg,l=r.rating;return n.state={email:c,message:i,rating:l},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.message,n=e.rating;return r.a.createElement("div",null,r.a.createElement("strong",null,t),r.a.createElement("p",null,a),r.a.createElement("p",null,n))}}]),a}(n.Component),T=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).changeState=function(){var e=n.props.location.state.title,t=JSON.parse(localStorage.getItem(e));t&&n.setState({counter:t.counter+1})},n.handleClick=function(){var e=n.props.location.state,t=n.props.location.state.title,a=n.state.counter,r=JSON.parse(localStorage.getItem(t));if(n.setState((function(e){return{counter:e.counter+1}})),r)r.counter=a,localStorage.setItem(t,JSON.stringify(r));else{var c=Object(d.a)(Object(d.a)({},e),{},{counter:a});localStorage.setItem(t,JSON.stringify(c))}n.sumCartItems()},n.sumCartItems=function(){var e=Object(d.a)({},localStorage),t=Object.values(e).map((function(e){return JSON.parse(e)})).reduce((function(e,t){return e+t.counter}),0);n.setState({sum:t})},n.state={email:"",message:"",rating:0,showForm:!1,counter:1,sum:0},n.inputHandler=n.inputHandler.bind(Object(k.a)(n)),n.renderRating=n.renderRating.bind(Object(k.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.sumCartItems(),this.changeState()}},{key:"inputHandler",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(A.a)({},a,n))}},{key:"renderRating",value:function(){this.setState({showForm:!0})}},{key:"render",value:function(){var e=this.props.location.state,t=e.title,a=e.thumbnail,n=e.price,c=e.attributes,i=this.state,o=i.email,l=i.message,s=i.rating,u=i.showForm,d=i.sum;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cart-screen"},r.a.createElement("span",{"data-testid":"shopping-cart-size"},d),r.a.createElement(m.b,{"data-testid":"shopping-cart-button",to:"/cart"},r.a.createElement("button",{type:"button",className:"cart-scree"},r.a.createElement("img",{src:v.a,alt:"",width:"20"})))),r.a.createElement("div",{className:"name-item-detais"},r.a.createElement("h3",{"data-testid":"product-detail-name"},t),r.a.createElement("p",null,"R$ ".concat(n.toLocaleString("pt-BR")))),r.a.createElement("div",{className:"product-detail"},r.a.createElement("img",{src:a,alt:t,className:"img-details"}),r.a.createElement("ul",null,c&&c.map((function(e,t){return r.a.createElement("li",{key:t},e.name,":"," ",e.value_name)})))),r.a.createElement("button",{type:"button",className:"button","data-testid":"product-detail-add-to-cart",onClick:this.handleClick},"Adicionar ao carrinho"),r.a.createElement("form",{className:"form"},r.a.createElement("input",{name:"email",required:!0,placeholder:"Email",type:"text",value:o,onChange:this.inputHandler}),r.a.createElement("textarea",{name:"message",placeholder:"Message","data-testid":"product-detail-evaluation",cols:"30",rows:"10",value:l,onChange:this.inputHandler}),r.a.createElement("label",{htmlFor:"rating"},"1",r.a.createElement("input",{type:"radio",id:"1",name:"rating",value:"1",onChange:this.inputHandler})),r.a.createElement("label",{htmlFor:"rating"},"2",r.a.createElement("input",{type:"radio",id:"2",name:"rating",value:"2",onChange:this.inputHandler})),r.a.createElement("label",{htmlFor:"rating"},"3",r.a.createElement("input",{type:"radio",id:"3",name:"rating",value:"3",onChange:this.inputHandler})),r.a.createElement("label",{htmlFor:"rating"},"4",r.a.createElement("input",{type:"radio",id:"4",name:"rating",value:"4",onChange:this.inputHandler})),r.a.createElement("label",{htmlFor:"rating"},"5",r.a.createElement("input",{type:"radio",id:"5",name:"rating",value:"5",onChange:this.inputHandler})),r.a.createElement("button",{onClick:this.renderRating,type:"button"},"Avaliar")),u?r.a.createElement(P,{email:o,msg:l,rating:s}):null)}}]),a}(n.Component),D=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).getItemLocalStorage=function(){var t=Object(d.a)({},localStorage),a=Object.values(t).map((function(e){return JSON.parse(e)}));e.setState({products:a,count:a})},e.handleClick=function(t){var a=t.target.id,n=JSON.parse(localStorage.getItem(a));localStorage.setItem(a,JSON.stringify(n)),e.getItemLocalStorage()},e.handleDelete=function(t){var a=t.target.id;localStorage.removeItem(a),e.getItemLocalStorage()},e.state={products:[],count:0},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getItemLocalStorage()}},{key:"render",value:function(){var e=this,t=this.state.count,a=this.state.products;return a.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"div-cart"},r.a.createElement("h1",null,"Carrinho"),r.a.createElement("p",null,"TOTAL: R$"," ",Math.round(100*a.reduce((function(e,t){return e+t.counter*t.price}),0))/100),r.a.createElement(m.b,{to:{pathname:"/checkout"}},r.a.createElement("button",{className:"button","data-testid":"checkout-products",type:"button"},"Finalizar compra"))),r.a.createElement("ul",{className:"cart-items"},a.map((function(a){var n=a.title,c=a.price,i=a.thumbnail,o=a.id,l=a.availableQuantity,s=a.attributes;return r.a.createElement("li",{className:"card",key:o},r.a.createElement("button",{className:"button-delete",type:"button",name:"delete",id:n,onClick:e.handleDelete},"Excluir"),r.a.createElement(m.b,{"data-testid":"product-detail-link",to:{pathname:"/product/".concat(o),state:{title:n,price:c,thumbnail:i,id:o,availableQuantity:l,attributes:s}}},r.a.createElement("div",{className:"product"},r.a.createElement("img",{src:i,alt:"Foto do produto ".concat(n)}),r.a.createElement("h3",{"data-testid":"shopping-cart-product-name"},n),r.a.createElement("p",null,"R$ ".concat(c.toLocaleString("pt-BR"))))),r.a.createElement("div",{className:"buttons-cart"},r.a.createElement("button",{"data-testid":"product-increase-quantity",type:"button",className:"button-sub-sum"},"-"),r.a.createElement("p",{className:"quantity","data-testid":"shopping-cart-product-quantity"},t.find((function(e){return e.title===n})).counter),r.a.createElement("button",{"data-testid":"product-decrease-quantity",type:"button",className:"button-sub-sum"},"+")))})))):r.a.createElement("p",{"data-testid":"shopping-cart-empty-message"},"Seu carrinho est\xe1 vazio")}}]),a}(r.a.Component),B=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"first"},r.a.createElement(y.a,{exact:!0,path:"/",component:M}),r.a.createElement(y.a,{path:"/cart",component:D}),r.a.createElement(y.a,{path:"/product/:id",render:function(e){return r.a.createElement(T,e)}}))}}]),a}(n.Component),z=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(m.a,null,r.a.createElement(E,null),r.a.createElement(B,null)))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.9ee6539b.chunk.js.map